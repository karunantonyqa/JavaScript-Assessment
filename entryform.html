<!DOCTYPE html>
<html>

<head>
</head>

<body>

    <nav>
        <a href="index.html">Main Page</a>
        <a href="trainers.html">Trainers</a>
        <a href="entryform.html">Entry Form</a>
        <a href="formdata.html">Form Data</a>
    </nav>

    <form name="myForm" id="formID" onsubmit="return validateForm()">
            Name: <br>
            <input type="text" id="nameBox"><br>
            D.O.B: <br>
            <input type="date" id="dobBox" value="2018-09-07"><br>
            Address: <br>
            <input type="text" id="addressBox"><br>
            Post Code: <br>
            <input type="text" id="pcBox"><br>
            Email: <br>
            <input type="text" id="emailBox"><br>
            <input type="submit" value="Submit" onsubmit="validateForm()">

    </form>


    <script>
        function validateForm(){
             var nameElement = document.getElementById("nameBox");
             var addElement = document.getElementById("addressBox");
             var pcElement = document.getElementById("pcBox");
             var emailElement = document.getElementById("emailBox");
             var dateElement = document.getElementById("dobBox");
             


             var alphaExp = /^[a-zA-Z]+$/;
             var addressAlphaExp = /([A-Za-z0-9-]+)/
             var emailAlphaExp = /(\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,6})/;

             var pcLimit = 10;

             var today = new Date();
                var dd= today.getDate();
                var mm = today.getMonth()+1;
                var yyyy = today.getFullYear();
                today = yyyy + "/" + mm + "/" + dd;
                var oldPerson = "1910/01/01";

                //Check if name field uses illegal characters
                if(!(nameElement.value.match(alphaExp))){
                    console.log("Name field tried to use illegal character");
                    return false;
                }

                //Check email input matches criteria
                if(!(emailElement.value.match(emailAlphaExp))){
                    console.log("Email does not fit criteria");
                    return false;
                }

                if(!(addElement.value.match(addressAlphaExp))){
                    console.log("Address field tried to use illegal character");
                    return false;
                }

                if(!(pcElement.value.match(addressAlphaExp))){
                    console.log("Tried to use illegal character");
                    return false;
                }

                //Check post code is shorter than 7 characters
                if(pcElement.value.length > pcLimit){
                    console.log("Post code Field is too long");
                    return false;
                }

                //Check valid date
                if(document.getElementById("dobBox").value > today || document.getElementById("dobBox").value < oldPerson){
                    console.log("Illegal date");
                    return false;
                }

                var formName = nameElement.value;
                var formAdd = addElement.value;
                var formDOB = dateElement.value;
                var formPC = pcElement.value;
                var formEmail = emailElement.value;
                //console.log(formName);
                localStorage.setItem("name", formName);
                localStorage.setItem("address", formAdd);
                localStorage.setItem("dob", formDOB);
                localStorage.setItem("pc", formPC);
                localStorage.setItem("email", formEmail);

        }
    </script>

</body>

</html>